(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7beb"],{"8b6L":function(e,t,s){"use strict";s.r(t);var a=s("QbLZ"),n=s.n(a),i=s("L2JU"),r={unread:"messageUnreadList",readed:"messageReadedList",trash:"messageTrashList"},o={name:"message_page",data:function(){return{listLoading:!0,contentLoading:!1,currentMessageType:"unread",messageContent:"",showingMsgItem:{}}},computed:n()({},Object(i.d)({messageUnreadList:function(e){return e.user.messageUnreadList},messageReadedList:function(e){return e.user.messageReadedList},messageTrashList:function(e){return e.user.messageTrashList},messageList:function(){return this[r[this.currentMessageType]]},titleClass:function(){return{"not-unread-list":"unread"!==this.currentMessageType}}}),Object(i.c)(["messageUnreadCount","messageReadedCount","messageTrashCount"])),methods:n()({},Object(i.b)(["getMessageList","hasRead","removeReaded","restoreTrash"]),{stopLoading:function(e){this[e]=!1},handleSelect:function(e){this.currentMessageType=e},handleView:function(e){var t=this;this.contentLoading=!0,this.getContentByMsgId({_id:e}).then(function(s){t.messageContent=s;var a=t.messageList.find(function(t){return t._id===e});a&&(t.showingMsgItem=a),"unread"===t.currentMessageType&&t.hasRead({_id:e}),t.stopLoading("contentLoading")}).catch(function(){t.stopLoading("contentLoading")})},removeMsg:function(e){e.loading=!0;var t=e._id;"readed"===this.currentMessageType?this.removeReaded({_id:t}):this.restoreTrash({_id:t})}}),mounted:function(){}},d=(s("F2W3"),s("KHd+")),l=Object(d.a)(o,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message_main"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"message-page-con message-category-con"},[s("el-menu",{attrs:{width:"auto","default-active":"unread"},on:{"on-select":e.handleSelect}},[s("el-menu-item",{attrs:{index:"unread"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-message"}),e._v(" "),s("span",{staticClass:"category-title"},[e._v("待处理")]),e._v(" "),s("el-badge",{staticStyle:{"margin-left":"10px"},attrs:{value:e.messageUnreadCount}})],1)],2),e._v(" "),s("el-menu-item",{attrs:{index:"readed"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-view"}),e._v(" "),s("span",{staticClass:"category-title"},[e._v("已完成")]),e._v(" "),s("el-badge",{staticStyle:{"margin-left":"10px"},attrs:{type:"info","class-name":"gray-dadge",value:e.messageReadedCount}})],1)],2),e._v(" "),s("el-menu-item",{attrs:{index:"trash"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-delete"}),e._v(" "),s("span",{staticClass:"category-title"},[e._v("回收站")]),e._v(" "),s("el-badge",{staticStyle:{"margin-left":"10px"},attrs:{type:"info","class-name":"gray-dadge",value:e.messageTrashCount}})],1)],2)],1)],1),e._v(" "),s("div",{staticClass:"message-page-con message-list-con"},[s("el-menu",{class:e.titleClass,attrs:{width:"auto","default-active":""},on:{"on-select":e.handleView}},e._l(e.messageList,function(t){return s("el-menu-item",{key:"msg_"+t._id,attrs:{index:t._id}},[s("div",[s("p",{staticClass:"msg-title"},[e._v(e._s(t.title))]),e._v(" "),s("el-badge",{attrs:{status:"default",text:t.create_time}}),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:"unread"!==e.currentMessageType,expression:"currentMessageType !== 'unread'"}],staticStyle:{float:"right","margin-right":"20px"},style:{display:t.loading?"inline-block !important":""},attrs:{loading:t.loading,size:"small",icon:"readed"===e.currentMessageType?"el-icon-delete":"el-icon-back",title:"readed"===e.currentMessageType?"删除":"还原",type:"text"},nativeOn:{click:function(s){s.stopPropagation(),e.removeMsg(t)}}})],1)])}))],1),e._v(" "),s("div",{staticClass:"message-page-con message-view-con"},[s("div",{staticClass:"message-view-header"},[s("h2",{staticClass:"message-view-title"},[e._v(e._s(e.showingMsgItem.title))]),e._v(" "),s("time",{staticClass:"message-view-time"},[e._v(e._s(e.showingMsgItem.create_time))])]),e._v(" "),s("div",{domProps:{innerHTML:e._s(e.messageContent)}})])])],1)},[],!1,null,null,null);l.options.__file="message.vue";t.default=l.exports},F2W3:function(e,t,s){"use strict";var a=s("jLnj");s.n(a).a},jLnj:function(e,t,s){}}]);