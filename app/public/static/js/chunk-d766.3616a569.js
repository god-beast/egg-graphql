(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d766"],{f9MD:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var o=a("HB48").a.fetch,n={uploadUrl:"http://192.168.5.245:9015/XHDataCenter/api/v1/resource/upload/25/35",getuuid:function(t){return o("get","http://xuehai.whytouch.com/wys.php",t)},getuuid1:function(t){return o("get","http://xuehai1.whytouch.com/wys.php",t)},getuuid2:function(t){return o("get","http://xuehai2.whytouch.com/wys.php",t)},getzip:"http://xuehai.whytouch.com/exportfull2.php?token=a64fcbafdf6bada44fe1d441a46feae1&id=",getzip1:"http://xuehai1.whytouch.com/exportfull2.php?token=a64fcbafdf6bada44fe1d441a46feae1&id=",getzip2:"http://xuehai2.whytouch.com/exportfull2.php?token=a64fcbafdf6bada44fe1d441a46feae1&id=",getNodeList:function(t){return o("get","/api/v1/console/selectNode",t)},putNodeList:function(t){return o("post","/api/v1/console/editNode",t)},deleteNodeList:function(t){return o("delete","/api/v1/console/delNode",t)},createNodeList:function(t){return o("post","/api/v1/console/addNode",t)},getRules:function(t){return o("get","/api/v1/console/selectCustom",t)},putRules:function(t){return o("post","/api/v1/console/editCustom",t)},deleteRules:function(t){return o("delete","/api/v1/console/delCustom",t)},createRules:function(t){return o("post","/api/v1/console/addCustom",t)}}},mdFf:function(t,e,a){"use strict";a.r(e);var o=a("QbLZ"),n=a.n(o),s=a("FyfS"),i=a.n(s),l=a("m1cH"),r=a.n(l),u=a("f9MD"),c={name:"nodeControl",data:function(){return{addShow:!1,editData:{nodeType:null,customLevel:1,customRules:"",customStatus:0,nodeId:null},listLoading:!1,dataList:[],currentId:"",rules:{nodeType:[{required:!0,message:"自定义转换类型",trigger:"change"}],customLevel:[{required:!0,message:"自定义优先级",trigger:"change"}],customRules:[{required:!0,message:"自定义规则",trigger:"change"}],customStatus:[{required:!0,message:"自定义状态",trigger:"change"}]},serverList:[],options:[],sortlist:[]}},created:function(){this.getList(),this.getServer()},methods:{changeType:function(t){this.editData.nodeId=null,this.options=[];var e=!0,a=!1,o=void 0;try{for(var n,s=i()(this.serverList);!(e=(n=s.next()).done);e=!0){var l=n.value;l.nodeType==t&&this.options.push(l)}}catch(t){a=!0,o=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw o}}this.options=[{nodeName:"无",id:"0"}].concat(r()(this.options))},getList:function(){var t=this;this.listLoading=!0,u.a.getRules().then(function(e){t.dataList=e.data;var a=!0,o=!1,n=void 0;try{for(var s,l=i()(t.dataList);!(a=(s=l.next()).done);a=!0){var r=s.value;t.sortlist.push(r.customLevel)}}catch(t){o=!0,n=t}finally{try{!a&&l.return&&l.return()}finally{if(o)throw n}}t.listLoading=!1})},getServer:function(){var t=this;u.a.getNodeList().then(function(e){t.serverList=e.data})},updateData:function(t){this.changeType(t.nodeType),this.currentId=t.id||null,this.addShow=!0,this.editData={nodeType:t.nodeType-0,customRules:t.customRules,customLevel:t.customLevel-0,customStatus:t.customStatus,nodeId:t.nodeId}},submitUpload:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;t.currentId?u.a.putRules(n()({id:t.currentId},t.editData)).then(function(e){t.$message({type:"success",message:"成功更新"}),t.getList(),t.addShow=!1}):u.a.createRules(t.editData).then(function(e){t.$message({type:"success",message:"成功新增"}),t.getList(),t.addShow=!1})})},cancelUpload:function(){this.addShow=!1},deleteData:function(t){var e=this;this.$confirm("确定删除该节点?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u.a.deleteRules({customId:t}).then(function(t){e.$message({type:"success",message:"成功删除"}),e.getList()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},d=(a("rQB3"),a("KHd+")),p=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-dialog",{attrs:{title:"规则管理",visible:t.addShow,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addShow=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.editData,rules:t.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"自定义优先级",prop:"customLevel"}},[a("el-input-number",{staticClass:"dialog_pram",staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入自定义优先级"},model:{value:t.editData.customLevel,callback:function(e){t.$set(t.editData,"customLevel",e)},expression:"editData.customLevel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"自定义优规则",prop:"customRules"}},[a("el-input",{staticClass:"dialog_pram",attrs:{clearable:"",placeholder:"请输入自定义规则",type:"textarea",rows:4},model:{value:t.editData.customRules,callback:function(e){t.$set(t.editData,"customRules",e)},expression:"editData.customRules"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"自定义转换类型",prop:"nodeType"}},[a("el-radio-group",{on:{change:t.changeType},model:{value:t.editData.nodeType,callback:function(e){t.$set(t.editData,"nodeType",e)},expression:"editData.nodeType"}},[a("el-radio",{attrs:{label:1}},[t._v("微演示")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("iSpring")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("SDK")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"自定义转换服务器",prop:"nodeId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editData.nodeId,callback:function(e){t.$set(t.editData,"nodeId",e)},expression:"editData.nodeId"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.nodeName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"自定义状态",prop:"customStatus"}},[a("el-radio",{attrs:{label:1},model:{value:t.editData.customStatus,callback:function(e){t.$set(t.editData,"customStatus",e)},expression:"editData.customStatus"}},[t._v("启用")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.editData.customStatus,callback:function(e){t.$set(t.editData,"customStatus",e)},expression:"editData.customStatus"}},[t._v("禁用")])],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{type:""},on:{click:t.cancelUpload}},[t._v("取消")])],1)],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.updateData({nodeType:1,customStatus:1,customLevel:1})}}},[t._v("新增规则")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,stripe:!0,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"自定义优先级",prop:"customLevel",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"自定义规则",prop:"customRules",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"自定义转换类型",prop:"nodeType",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"info"}},[t._v(t._s(1==e.row.nodeType?"微演示":2==e.row.nodeType?"iSpring":"SDK"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"自定义转换服务器",prop:"nodeName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"自定义状态",prop:"customStatus",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:0==e.row.customStatus?"warning":"success"}},[t._v(t._s(0==e.row.customStatus?"禁用":"启用"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"150",label:"操作",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.updateData(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){t.deleteData(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},[],!1,null,"ecf6a6e6",null);p.options.__file="rulesControl.vue";e.default=p.exports},ngi2:function(t,e,a){},rQB3:function(t,e,a){"use strict";var o=a("ngi2");a.n(o).a}}]);