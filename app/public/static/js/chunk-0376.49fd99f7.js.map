{"version":3,"sources":["webpack:///./src/components/MarkdownEditor/index.vue?2281","webpack:///./src/components/MarkdownEditor/defaultOptions.js","webpack:///./src/components/MarkdownEditor/index.vue?79a0","webpack:///src/components/MarkdownEditor/index.vue","webpack:///./src/components/MarkdownEditor/index.vue","webpack:///./src/api/project.js","webpack:///./src/views/project/createDemand.vue?9d95","webpack:///./src/views/project/createDemand.vue?5207","webpack:///./src/views/project/createDemand.vue?5e15","webpack:///src/views/project/createDemand.vue","webpack:///./src/views/project/createDemand.vue"],"names":["defaultOptions","minHeight","previewStyle","useCommandShortcut","useDefaultHTMLSanitizer","usageStatistics","hideModeSwitch","toolbarItems","components_MarkdownEditorvue_type_script_lang_js_","name","props","value","type","String","default","id","required","Date","Math","random","toFixed","options","Object","mode","height","language","data","editor","computed","editorOptions","assign_default","this","initialEditType","watch","newValue","preValue","getValue","setValue","val","destroyEditor","initEditor","changeMode","mounted","destroyed","methods","_this","tui_editor_Editor_default","a","extends_default","el","document","getElementById","on","$emit","off","remove","setHtml","getHtml","component","componentNormalizer","_h","$createElement","_self","_c","attrs","__file","__webpack_exports__","__webpack_require__","d","Project","fetch","fetchobj","createMetting","getMetting","createDemand","getDemand","getTag","createTag","updateTag","deleteTag","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_2_node_modules_sass_loader_lib_loader_js_ref_10_3_node_modules_vue_loader_lib_index_js_vue_loader_options_createDemand_vue_vue_type_style_index_0_id_13db5ee7_rel_stylesheet_2Fscss_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","n","project_createDemandvue_type_script_lang_js_","components","MarkdownEditor","postForm","createTime","toLocaleDateString","getTime","tag","content","tagList","vuex_esm","created","$route","query","change","demand","JSON","parse","localStorage","getItem","markdown","markdown2Html","e","then","t","bind","showdown","Converter","makeHtml","_this2","project","limit","page","res","submitForm","_this3","trim","$confirm","confirmButtonText","cancelButtonText","stringify_default","$refs","markdownEditor","author","userId","$message","message","$router","push","catch","warning","_vm","staticClass","disabled","format","placeholder","model","callback","$$v","$set","expression","_v","_l","item","key","_id","label","tagName","ref","staticStyle","margin-top","click"],"mappings":"sGAAA,mGCAeA,GACXC,UAAW,QACXC,aAAc,WACdC,oBAAoB,EACpBC,yBAAyB,EACzBC,iBAAiB,EACjBC,gBAAgB,EAChBC,cACE,UACA,OACA,SACA,SACA,UACA,KACA,QACA,UACA,KACA,KACA,OACA,SACA,UACA,UACA,QACA,QACA,OACA,UACA,OACA,cC3BoMC,GCY1MC,KAAA,iBACAC,OACAC,OACAC,KAAAC,OACAC,QAAA,IAEAC,IACAH,KAAAC,OACAG,UAAA,EACAF,QAHA,WAIA,+BAAAG,MAAA,IAAAC,KAAAC,UAAAC,QAAA,KAGAC,SACAT,KAAAU,OACAR,QAFA,WAGA,OAAAd,IAGAuB,MACAX,KAAAC,OACAC,QAAA,YAEAU,QACAZ,KAAAC,OACAG,UAAA,EACAF,QAAA,SAEAW,UACAb,KAAAC,OACAG,UAAA,EACAF,QAAA,UAGAY,KAnCA,WAoCA,OACAC,OAAA,OAGAC,UACAC,cADA,WAEA,IAAAR,EAAAS,OAAA9B,EAAA+B,KAAAV,SAIA,OAHAA,EAAAW,gBAAAD,KAAAR,KACAF,EAAAG,OAAAO,KAAAP,OACAH,EAAAI,SAAAM,KAAAN,SACAJ,IAGAY,OACAtB,MADA,SACAuB,EAAAC,GACAD,IAAAC,GAAAD,IAAAH,KAAAJ,OAAAS,YACAL,KAAAJ,OAAAU,SAAAH,IAGAT,SANA,SAMAa,GACAP,KAAAQ,gBACAR,KAAAS,cAEAhB,OAVA,SAUAU,GACAH,KAAAJ,OAAAH,OAAAU,IAEAX,KAbA,SAaAW,GACAH,KAAAJ,OAAAc,WAAAP,KAGAQ,QAlEA,WAmEAX,KAAAS,cAEAG,UArEA,WAsEAZ,KAAAQ,iBAEAK,SACAJ,WADA,WACA,IAAAK,EAAAd,KACAA,KAAAJ,OAAA,IAAAmB,EAAAC,EAAAC,KACAC,GAAAC,SAAAC,eAAApB,KAAAhB,KACAgB,KAAAF,gBAEAE,KAAApB,OACAoB,KAAAJ,OAAAU,SAAAN,KAAApB,OAEAoB,KAAAJ,OAAAyB,GAAA,oBACAP,EAAAQ,MAAA,QAAAR,EAAAlB,OAAAS,eAGAG,cAbA,WAcAR,KAAAJ,SACAI,KAAAJ,OAAA2B,IAAA,UACAvB,KAAAJ,OAAA4B,WAEAlB,SAlBA,SAkBA1B,GACAoB,KAAAJ,OAAAU,SAAA1B,IAEAyB,SArBA,WAsBA,OAAAL,KAAAJ,OAAAS,YAEAoB,QAxBA,SAwBA7C,GACAoB,KAAAJ,OAAA6B,QAAA7C,IAEA8C,QA3BA,WA4BA,OAAA1B,KAAAJ,OAAA8B,yBCxGAC,EAAgBpC,OAAAqC,EAAA,EAAArC,CACdd,EJRF,WAA0B,IAAaoD,EAAb7B,KAAa8B,eAAkD,OAA/D9B,KAAuC+B,MAAAC,IAAAH,GAAwB,OAAiBI,OAAOjD,GAAvFgB,KAAuFhB,WIWjH,EACA,KACA,KACA,MAIA2C,EAAArC,QAAA4C,OAAA,YACeC,EAAA,EAAAR,6CCnBfS,EAAAC,EAAAF,EAAA,sBAAAG,IAAA,IACIC,EADJH,EAAA,QACYI,EAASD,MAERD,GAETG,cAFmB,SAEL9C,GACV,OAAO4C,EAAM,OAAQ,iBAAkB5C,IAG3C+C,WANmB,SAMR/C,GACP,OAAO4C,EAAM,MAAO,eAAgB5C,IAGxCgD,aAVmB,SAUNhD,GACT,OAAO4C,EAAM,OAAQ,gBAAiB5C,IAG1CiD,UAdmB,SAcTjD,GACN,OAAO4C,EAAM,MAAO,cAAe5C,IAGvCkD,OAlBmB,SAkBZlD,GACH,OAAO4C,EAAM,MAAO,OAAQ5C,IAEhCmD,UArBmB,SAqBTnD,GACN,OAAO4C,EAAM,OAAQ,OAAQ5C,IAEjCoD,UAxBmB,SAwBTpD,GACN,OAAO4C,EAAM,MAAO,OAAQ5C,IAEhCqD,UA3BmB,SA2BTrD,GACN,OAAO4C,EAAM,SAAU,OAAQ5C,wCC/BvC,IAAAsD,EAAAb,EAAA,QAAAA,EAAAc,EAAAD,GAAsf,qECAtf,kFCAiNE,GCwCjNzE,KAAA,eACA0E,YAAAC,iBAAA,GACA1D,KAHA,WAIA,OACA2D,UACAC,WAAA,IAAArE,KACA,IAAAA,MAAA,IAAAA,MAAAsE,sBAAAC,WACAA,UACAC,IAAA,GACA7E,KAAA,IACA8E,QAAA,IAEAC,aAGA/D,SAAYoB,OACZ1B,OAAAsE,EAAA,EAAAtE,EAAA,mBAEAuE,QAnBA,WAoBA,GAAA9D,KAAA+D,OAAAC,MAAAC,OAAA,CACA,IAAAC,EAAAC,KAAAC,MAAAC,aAAAC,QAAA,WACAtE,KAAAsD,SAAAI,IAAAQ,EAAAR,IACA1D,KAAAsD,SAAAK,QAAAO,EAAAK,SACAvE,KAAAsD,SAAAzE,KAAA,IAEAmB,KAAA6C,UAEAhC,SAKA2D,cALA,WAKA,IAAA1D,EAAAd,KACMoC,EAAAqC,EAAA,QAAAC,KAAAtC,EAAAuC,EAAAC,KAAA,gBAANF,KAAA,SAAAG,GAEA,OADA,IAAAA,EAAAC,WACAC,SAAAjE,EAAA6C,YAGAd,OAXA,WAWA,IAAAmC,EAAAhF,KACMiF,EAAA,EAANpC,QACAqC,MAAA,IACAC,KAAA,IACAT,KAAA,SAAAU,GACAJ,EAAApB,QAAAwB,EAAAzF,QAGA0F,WAnBA,WAmBA,IAAAC,EAAAtF,KACA,OAAAA,KAAAsD,SAAAC,WAIAvD,KAAAsD,SAAAK,QAAA4B,YAKAvF,KAAAwF,SAAA,cACAC,kBAAA,KACAC,iBAAA,KACA7G,KAAA,YAEA6F,KAAA,WACA,IAAApB,EAAAa,KAAAC,MAAAuB,IAAAL,EAAAhC,WACAiB,EAAAjB,EAAAK,QACAL,EAAAK,QAAA2B,EAAAM,MAAAC,eAAAnE,UACQuD,EAAA,EAARtC,aAAA1B,KACAsD,YACAjB,GACAwC,OAAAR,EAAA5G,KACAqH,OAAAT,EAAAS,UACArB,KAAA,SAAAU,GACAE,EAAAU,UACAnH,KAAA,UACAoH,QAAA,SAEAX,EAAAY,QAAAC,KAAA,2BAGAC,MAAA,WACAd,EAAAU,UACAnH,KAAA,OACAoH,QAAA,WA7BAjG,KAAAgG,SAAAK,QAAA,WACA,IALArG,KAAAgG,SAAAK,QAAA,UACA,8BCjFA1E,EAAgBpC,OAAAqC,EAAA,EAAArC,CACd4D,EHTF,WAA0B,IAAAmD,EAAAtG,KAAa6B,EAAAyE,EAAAxE,eAA0BE,EAAAsE,EAAAvE,MAAAC,IAAAH,EAAwB,OAAAG,EAAA,OAAiBuE,YAAA,yBAAmCvE,EAAA,OAAYuE,YAAA,8BAAwCvE,EAAA,OAAYuE,YAAA,qBAA+BvE,EAAA,kBAAuBuE,YAAA,cAAAtE,OAAiCuE,SAAA,GAAA3H,KAAA,OAAA4H,OAAA,aAAAC,YAAA,UAAyEC,OAAQ/H,MAAA0H,EAAAhD,SAAA,WAAAsD,SAAA,SAAAC,GAAyDP,EAAAQ,KAAAR,EAAAhD,SAAA,aAAAuD,IAA0CE,WAAA,yBAAmCT,EAAAU,GAAA,KAAAhF,EAAA,aAA8BuE,YAAA,cAAAtE,OAAiCyE,YAAA,UAAuBC,OAAQ/H,MAAA0H,EAAAhD,SAAA,IAAAsD,SAAA,SAAAC,GAAkDP,EAAAQ,KAAAR,EAAAhD,SAAA,MAAAuD,IAAmCE,WAAA,iBAA4BT,EAAAW,GAAAX,EAAA,iBAAAY,GAAqC,OAAAlF,EAAA,aAAuBmF,IAAAD,EAAAE,IAAAnF,OAAoBoF,MAAAH,EAAAI,QAAA1I,MAAAsI,EAAAI,cAA6ChB,EAAAU,GAAA,KAAAhF,EAAA,aAA+BuE,YAAA,cAAAtE,OAAiCyE,YAAA,WAAwBC,OAAQ/H,MAAA0H,EAAAhD,SAAA,KAAAsD,SAAA,SAAAC,GAAmDP,EAAAQ,KAAAR,EAAAhD,SAAA,OAAAuD,IAAoCE,WAAA,mBAA6B/E,EAAA,aAAkBC,OAAOoF,MAAA,OAAAzI,MAAA,OAA4B0H,EAAAU,GAAA,KAAAhF,EAAA,aAA8BC,OAAOoF,MAAA,OAAAzI,MAAA,OAA4B0H,EAAAU,GAAA,KAAAhF,EAAA,aAA8BC,OAAOoF,MAAA,OAAAzI,MAAA,QAA4B,OAAA0H,EAAAU,GAAA,KAAAhF,EAAA,OAAgCuE,YAAA,qBAA+BvE,EAAA,mBAAwBuF,IAAA,iBAAAtF,OAA4BjD,GAAA,gBAAAS,OAAA,QAAAC,SAAA,SAAyDiH,OAAQ/H,MAAA0H,EAAAhD,SAAA,QAAAsD,SAAA,SAAAC,GAAsDP,EAAAQ,KAAAR,EAAAhD,SAAA,UAAAuD,IAAuCE,WAAA,sBAAgCT,EAAAU,GAAA,KAAAhF,EAAA,aAA8BwF,aAAaC,aAAA,QAAoBxF,OAAQpD,KAAA,WAAiBwC,IAAKqG,MAAApB,EAAAjB,cAAwBiB,EAAAU,GAAA,qBGYxnD,EACA,KACA,WACA,MAIArF,EAAArC,QAAA4C,OAAA,mBACeC,EAAA,QAAAR","file":"static/js/chunk-0376.49fd99f7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":_vm.id}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\n    minHeight: '200px',\n    previewStyle: 'vertical',\n    useCommandShortcut: true,\n    useDefaultHTMLSanitizer: true,\n    usageStatistics: false,\n    hideModeSwitch: false,\n    toolbarItems: [\n      'heading',\n      'bold',\n      'italic',\n      'strike',\n      'divider',\n      'hr',\n      'quote',\n      'divider',\n      'ul',\n      'ol',\n      'task',\n      'indent',\n      'outdent',\n      'divider',\n      'table',\n      'image',\n      'link',\n      'divider',\n      'code',\n      'codeblock'\n    ]\n  }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div :id=\"id\"/>\n</template>\n\n<script>\n// deps for editor\nimport 'codemirror/lib/codemirror.css' // codemirror\nimport 'tui-editor/dist/tui-editor.css' // editor ui\nimport 'tui-editor/dist/tui-editor-contents.css' // editor content\nimport Editor from 'tui-editor'\nimport defaultOptions from './defaultOptions'\nexport default {\n  name: 'MarddownEditor',\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    id: {\n      type: String,\n      required: false,\n      default() {\n        return 'markdown-editor-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\n      }\n    },\n    options: {\n      type: Object,\n      default() {\n        return defaultOptions\n      }\n    },\n    mode: {\n      type: String,\n      default: 'markdown'\n    },\n    height: {\n      type: String,\n      required: false,\n      default: '300px'\n    },\n    language: {\n      type: String,\n      required: false,\n      default: 'en_US' // https://github.com/nhnent/tui.editor/tree/master/src/js/langs\n    }\n  },\n  data() {\n    return {\n      editor: null\n    }\n  },\n  computed: {\n    editorOptions() {\n      const options = Object.assign({}, defaultOptions, this.options)\n      options.initialEditType = this.mode\n      options.height = this.height\n      options.language = this.language\n      return options\n    }\n  },\n  watch: {\n    value(newValue, preValue) {\n      if (newValue !== preValue && newValue !== this.editor.getValue()) {\n        this.editor.setValue(newValue)\n      }\n    },\n    language(val) {\n      this.destroyEditor()\n      this.initEditor()\n    },\n    height(newValue) {\n      this.editor.height(newValue)\n    },\n    mode(newValue) {\n      this.editor.changeMode(newValue)\n    }\n  },\n  mounted() {\n    this.initEditor()\n  },\n  destroyed() {\n    this.destroyEditor()\n  },\n  methods: {\n    initEditor() {\n      this.editor = new Editor({\n        el: document.getElementById(this.id),\n        ...this.editorOptions\n      })\n      if (this.value) {\n        this.editor.setValue(this.value)\n      }\n      this.editor.on('change', () => {\n        this.$emit('input', this.editor.getValue())\n      })\n    },\n    destroyEditor() {\n      if (!this.editor) return\n      this.editor.off('change')\n      this.editor.remove()\n    },\n    setValue(value) {\n      this.editor.setValue(value)\n    },\n    getValue() {\n      return this.editor.getValue()\n    },\n    setHtml(value) {\n      this.editor.setHtml(value)\n    },\n    getHtml() {\n      return this.editor.getHtml()\n    }\n  }\n}\n</script>","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=307a3048&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","import fetchobj from '@/utils/fetch'\nlet fetch = fetchobj.fetch;\n\nexport const Project = {\n\n    createMetting(data) {\n        return fetch('post', '/createMetting', data)\n    },\n\n    getMetting(data) {\n        return fetch('get', '/mettingList', data)\n    },\n\n    createDemand(data) {\n        return fetch('post', '/createDemand', data)\n    },\n\n    getDemand(data) {\n        return fetch('get', '/demandList', data)\n    },\n\n    getTag(data) {\n        return fetch('get', '/tag', data)\n    },\n    createTag(data) {\n        return fetch('post', '/tag', data)\n    },\n    updateTag(data) {\n        return fetch('put', '/tag', data)\n    },\n    deleteTag(data) {\n        return fetch('delete', '/tag', data)\n    },\n\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=style&index=0&id=13db5ee7&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=style&index=0&id=13db5ee7&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"createPost-container\"},[_c('div',{staticClass:\"createPost-main-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-date-picker',{staticClass:\"filter-item\",attrs:{\"disabled\":\"\",\"type\":\"date\",\"format\":\"yyyy-MM-dd\",\"placeholder\":\"选择日期时间\"},model:{value:(_vm.postForm.createTime),callback:function ($$v) {_vm.$set(_vm.postForm, \"createTime\", $$v)},expression:\"postForm.createTime\"}}),_vm._v(\" \"),_c('el-select',{staticClass:\"filter-item\",attrs:{\"placeholder\":\"请选择版本号\"},model:{value:(_vm.postForm.tag),callback:function ($$v) {_vm.$set(_vm.postForm, \"tag\", $$v)},expression:\"postForm.tag\"}},_vm._l((_vm.tagList),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.tagName,\"value\":item.tagName}})})),_vm._v(\" \"),_c('el-select',{staticClass:\"filter-item\",attrs:{\"placeholder\":\"请选择需求类型\"},model:{value:(_vm.postForm.type),callback:function ($$v) {_vm.$set(_vm.postForm, \"type\", $$v)},expression:\"postForm.type\"}},[_c('el-option',{attrs:{\"label\":\"正式需求\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"需求变更\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"临时需求\",\"value\":\"2\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"editor-container\"},[_c('markdown-editor',{ref:\"markdownEditor\",attrs:{\"id\":\"contentEditor\",\"height\":\"500px\",\"language\":\"zh_CN\"},model:{value:(_vm.postForm.content),callback:function ($$v) {_vm.$set(_vm.postForm, \"content\", $$v)},expression:\"postForm.content\"}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"发布\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"createPost-container\">\n    <div class=\"createPost-main-container\">\n      <div class=\"filter-container\">\n        <el-date-picker\n          disabled\n          class=\"filter-item\"\n          v-model=\"postForm.createTime\"\n          type=\"date\"\n          format=\"yyyy-MM-dd\"\n          placeholder=\"选择日期时间\"\n        />\n        <!-- 版本号 -->\n        <el-select class=\"filter-item\" v-model=\"postForm.tag\" placeholder=\"请选择版本号\">\n          <el-option v-for=\"item in tagList\" :key=\"item._id\" :label=\"item.tagName\" :value=\"item.tagName\"></el-option>\n        </el-select>\n        <!-- 需求类型 0 新需求 1 变更需求 2 临时需求 -->\n        <el-select class=\"filter-item\" v-model=\"postForm.type\" placeholder=\"请选择需求类型\">\n          <el-option label=\"正式需求\" value=\"0\"></el-option>\n          <el-option label=\"需求变更\" value=\"1\"></el-option>\n          <el-option label=\"临时需求\" value=\"2\"></el-option>\n        </el-select>\n      </div>\n\n      <div class=\"editor-container\">\n        <markdown-editor id=\"contentEditor\" ref=\"markdownEditor\" v-model=\"postForm.content\" height=\"500px\" language=\"zh_CN\"/>\n        <!-- <Tinymce ref=\"editor\" :height=\"500\" v-model=\"postForm.content\"/> -->\n        <el-button style=\"margin-top:10px\" @click=\"submitForm\" type=\"primary\">发布</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import Tinymce from \"@/components/Tinymce\";\nimport MarkdownEditor from '@/components/MarkdownEditor'\nimport { mapGetters } from \"vuex\";\nimport { Project } from \"@/api/project\";\n\nexport default {\n  name: \"createDemand\",\n  components: { MarkdownEditor },\n  data() {\n    return {\n      postForm: {\n        createTime: new Date( // 当天23:59\n          new Date(new Date().toLocaleDateString()).getTime()\n        ).getTime(),\n        tag: \"\",\n        type: \"0\",\n        content: ``\n      },\n      tagList:[]\n    };\n  },\n  computed: {\n    ...mapGetters([\"name\", \"userId\"])\n  },\n  created() {\n    if (this.$route.query.change) {\n      let demand = JSON.parse(localStorage.getItem(\"demand\"));\n      this.postForm.tag = demand.tag;\n      this.postForm.content = demand.markdown;\n      this.postForm.type = \"1\";\n    }\n    this.getTag();\n  },\n  methods: {\n    /**\n     * @description markdown转html\n     * @return {type} {description}\n     */\n    markdown2Html() {\n      import('showdown').then(showdown => {\n        const converter = new showdown.Converter();\n        return converter.makeHtml(this.content)\n      })\n    },\n    getTag() {\n      Project.getTag({\n        limit: 1000,\n        page: 1\n      }).then(res => {\n        this.tagList = res.data;\n      });\n    },\n    submitForm() {\n      if (!this.postForm.createTime) {\n        this.$message.warning(\"请填写日期\");\n        return false;\n      }\n      if (!this.postForm.content.trim()) {\n        this.$message.warning(\"内容不能为空\");\n        return false;\n      }\n\n      this.$confirm(\"确定发布?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          let postForm=JSON.parse(JSON.stringify(this.postForm));\n          let markdown=postForm.content;\n          postForm.content=this.$refs.markdownEditor.getHtml();\n          Project.createDemand({\n            markdown,\n            ...postForm,\n            author: this.name,\n            userId: this.userId\n          }).then(res => {\n            this.$message({\n              type: \"success\",\n              message: \"发布成功\"\n            });\n            this.$router.push(\"/project/demandList\");\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消\"\n          });\n        });\n    }\n  }\n};\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.createPost-container {\n  position: relative;\n  padding-top: 40px;\n  .createPost-main-container {\n    padding: 0px 45px 20px 50px;\n    .postInfo-container {\n      position: relative;\n      margin-bottom: 10px;\n      .postInfo-container-item {\n        float: left;\n      }\n    }\n    .editor-container {\n      min-height: 500px;\n      margin: 15px 0;\n      .editor-upload-btn-container {\n        text-align: right;\n        margin-right: 10px;\n        .editor-upload-btn {\n          display: inline-block;\n        }\n      }\n    }\n  }\n  .word-counter {\n    width: 40px;\n    position: absolute;\n    right: -10px;\n    top: 0px;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./createDemand.vue?vue&type=template&id=13db5ee7&scoped=true&\"\nimport script from \"./createDemand.vue?vue&type=script&lang=js&\"\nexport * from \"./createDemand.vue?vue&type=script&lang=js&\"\nimport style0 from \"./createDemand.vue?vue&type=style&index=0&id=13db5ee7&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13db5ee7\",\n  null\n  \n)\n\ncomponent.options.__file = \"createDemand.vue\"\nexport default component.exports"],"sourceRoot":""}