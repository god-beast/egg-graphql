{"version":3,"sources":["webpack:///./src/api/project.js","webpack:///./src/components/Tinymce/index.vue?9af0","webpack:///./src/components/Tinymce/components/editorImage.vue?5f1f","webpack:///src/components/Tinymce/components/editorImage.vue","webpack:///./src/components/Tinymce/components/editorImage.vue","webpack:///./src/components/Tinymce/components/editorImage.vue?53ed","webpack:///./src/components/Tinymce/plugins.js","webpack:///./src/components/Tinymce/toolbar.js","webpack:///./src/components/Tinymce/index.vue?02b1","webpack:///src/components/Tinymce/index.vue","webpack:///./src/components/Tinymce/index.vue","webpack:///./src/views/project/createDemand.vue?caa6","webpack:///./src/views/project/createDemand.vue?5e15","webpack:///src/views/project/createDemand.vue","webpack:///./src/views/project/createDemand.vue","webpack:///./src/components/Tinymce/index.vue?f9c2","webpack:///./src/views/project/createDemand.vue?9e98","webpack:///./src/components/Tinymce/components/editorImage.vue?97c3"],"names":["__webpack_require__","d","__webpack_exports__","Project","fetch","fetchobj","createMetting","data","getMetting","createDemand","getDemand","getTag","createTag","updateTag","deleteTag","components_editorImagevue_type_script_lang_js_","name","props","color","type","String","default","dialogVisible","listObj","fileList","methods","checkAllSuccess","_this","this","keys_default","every","item","hasSuccess","handleSubmit","_this2","arr","map","v","$emit","$message","handleSuccess","response","file","uid","objKeyArr","i","len","length","url","files","handleRemove","beforeUpload","_self","_URL","window","URL","webkitURL","fileName","promise_default","a","resolve","reject","img","Image","src","createObjectURL","onload","width","height","component","Object","componentNormalizer","_vm","_h","$createElement","_c","staticClass","style","background","borderColor","attrs","icon","size","on","click","$event","_v","visible","update:visible","multiple","file-list","show-file-list","on-remove","on-success","before-upload","action","list-type","options","__file","plugins","toolbar","components_Tinymcevue_type_script_lang_js_","components","editorImage","id","Date","Math","random","toFixed","value","Array","required","menubar","Number","hasChange","hasInit","tinymceId","fullscreen","languageTypeList","en","zh","computed","language","$store","getters","watch","val","$nextTick","tinymce","get","setContent","_this3","destroyTinymce","initTinymce","mounted","activated","deactivated","destroyed","_this4","init","selector","body_class","object_resizing","Tinymce_toolbar","Tinymce_plugins","end_container_on_empty_block","powerpaste_word_import","code_dialog_height","code_dialog_width","advlist_bullet_styles","advlist_number_styles","imagetools_cors_hosts","default_link_target","link_title","nonbreaking_force_tab","init_instance_callback","editor","getContent","setup","e","state","destroy","imageSuccessCBK","forEach","insertContent","Tinymce_component","class","project_createDemandvue_type_script_lang_js_","Tinymce","postForm","createTime","toLocaleDateString","getTime","tag","content","tagList","extends_default","vuex_esm","created","$route","query","change","demand","JSON","parse","localStorage","getItem","project","limit","page","then","res","submitForm","trim","$confirm","confirmButtonText","cancelButtonText","author","userId","message","$router","push","catch","warning","disabled","format","placeholder","model","callback","$$v","$set","expression","_l","key","_id","label","tagName","ref","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_2_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_26fa9258_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","n","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_2_node_modules_sass_loader_lib_loader_js_ref_10_3_node_modules_vue_loader_lib_index_js_vue_loader_options_createDemand_vue_vue_type_style_index_0_id_6fd96a11_rel_stylesheet_2Fscss_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_2_node_modules_sass_loader_lib_loader_js_ref_10_3_node_modules_vue_loader_lib_index_js_vue_loader_options_editorImage_vue_vue_type_style_index_0_id_39480e6e_rel_stylesheet_2Fscss_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/chunk-579a.b56484d1.js","sourcesContent":["import fetchobj from '@/utils/fetch'\nlet fetch = fetchobj.fetch;\n\nexport const Project = {\n\n    createMetting(data) {\n        return fetch('post', '/createMetting', data)\n    },\n\n    getMetting(data) {\n        return fetch('get', '/mettingList', data)\n    },\n\n    createDemand(data) {\n        return fetch('post', '/createDemand', data)\n    },\n\n    getDemand(data) {\n        return fetch('get', '/demandList', data)\n    },\n\n    getTag(data) {\n        return fetch('get', '/tag', data)\n    },\n    createTag(data) {\n        return fetch('post', '/tag', data)\n    },\n    updateTag(data) {\n        return fetch('put', '/tag', data)\n    },\n    deleteTag(data) {\n        return fetch('delete', '/tag', data)\n    },\n\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tinymce-container editor-container\",class:{fullscreen:_vm.fullscreen}},[_c('textarea',{staticClass:\"tinymce-textarea\",attrs:{\"id\":_vm.tinymceId}}),_vm._v(\" \"),_c('div',{staticClass:\"editor-custom-btn-container\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editorImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editorImage.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"upload-container\">\n    <el-button :style=\"{background:color,borderColor:color}\" icon=\"el-icon-upload\" size=\"mini\" type=\"primary\" @click=\" dialogVisible=true\">上传图片\n    </el-button>\n    <el-dialog :visible.sync=\"dialogVisible\">\n      <el-upload\n        :multiple=\"true\"\n        :file-list=\"fileList\"\n        :show-file-list=\"true\"\n        :on-remove=\"handleRemove\"\n        :on-success=\"handleSuccess\"\n        :before-upload=\"beforeUpload\"\n        class=\"editor-slide-upload\"\n        action=\"https://httpbin.org/post\"\n        list-type=\"picture-card\">\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n      </el-upload>\n      <el-button @click=\"dialogVisible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"handleSubmit\">确 定</el-button>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n// import { getToken } from 'api/qiniu'\n\nexport default {\n  name: 'EditorSlideUpload',\n  props: {\n    color: {\n      type: String,\n      default: '#1890ff'\n    }\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      listObj: {},\n      fileList: []\n    }\n  },\n  methods: {\n    checkAllSuccess() {\n      return Object.keys(this.listObj).every(item => this.listObj[item].hasSuccess)\n    },\n    handleSubmit() {\n      const arr = Object.keys(this.listObj).map(v => this.listObj[v])\n      if (!this.checkAllSuccess()) {\n        this.$message('请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！')\n        return\n      }\n      this.$emit('successCBK', arr)\n      this.listObj = {}\n      this.fileList = []\n      this.dialogVisible = false\n    },\n    handleSuccess(response, file) {\n      const uid = file.uid\n      const objKeyArr = Object.keys(this.listObj)\n      for (let i = 0, len = objKeyArr.length; i < len; i++) {\n        if (this.listObj[objKeyArr[i]].uid === uid) {\n          this.listObj[objKeyArr[i]].url = response.files.file\n          this.listObj[objKeyArr[i]].hasSuccess = true\n          return\n        }\n      }\n    },\n    handleRemove(file) {\n      const uid = file.uid\n      const objKeyArr = Object.keys(this.listObj)\n      for (let i = 0, len = objKeyArr.length; i < len; i++) {\n        if (this.listObj[objKeyArr[i]].uid === uid) {\n          delete this.listObj[objKeyArr[i]]\n          return\n        }\n      }\n    },\n    beforeUpload(file) {\n      const _self = this\n      const _URL = window.URL || window.webkitURL\n      const fileName = file.uid\n      this.listObj[fileName] = {}\n      return new Promise((resolve, reject) => {\n        const img = new Image()\n        img.src = _URL.createObjectURL(file)\n        img.onload = function() {\n          _self.listObj[fileName] = { hasSuccess: false, uid: file.uid, width: this.width, height: this.height }\n        }\n        resolve(true)\n      })\n    }\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.editor-slide-upload {\n  margin-bottom: 20px;\n  /deep/ .el-upload--picture-card {\n    width: 100%;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./editorImage.vue?vue&type=template&id=39480e6e&scoped=true&\"\nimport script from \"./editorImage.vue?vue&type=script&lang=js&\"\nexport * from \"./editorImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./editorImage.vue?vue&type=style&index=0&id=39480e6e&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39480e6e\",\n  null\n  \n)\n\ncomponent.options.__file = \"editorImage.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-container\"},[_c('el-button',{style:({background:_vm.color,borderColor:_vm.color}),attrs:{\"icon\":\"el-icon-upload\",\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible=true}}},[_vm._v(\"上传图片\\n  \")]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-upload',{staticClass:\"editor-slide-upload\",attrs:{\"multiple\":true,\"file-list\":_vm.fileList,\"show-file-list\":true,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleSuccess,\"before-upload\":_vm.beforeUpload,\"action\":\"https://httpbin.org/post\",\"list-type\":\"picture-card\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Any plugins you want to use has to be imported\n// Detail plugins list see https://www.tinymce.com/docs/plugins/\n// Custom builds see https://www.tinymce.com/download/custom-builds/\n\nconst plugins = ['advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount']\n\nexport default plugins\n","// Here is a list of the toolbar\n// Detail list see https://www.tinymce.com/docs/advanced/editor-control-identifiers/#toolbarcontrols\n\nconst toolbar = ['bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample', 'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen']\n\nexport default toolbar\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div :class=\"{fullscreen:fullscreen}\" class=\"tinymce-container editor-container\">\n    <textarea :id=\"tinymceId\" class=\"tinymce-textarea\"/>\n    <div class=\"editor-custom-btn-container\">\n      <!-- <editorImage color=\"#1890ff\" class=\"editor-upload-btn\" @successCBK=\"imageSuccessCBK\"/> -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport editorImage from './components/editorImage'\nimport plugins from './plugins'\nimport toolbar from './toolbar'\n\nexport default {\n  name: 'Tinymce',\n  components: { editorImage },\n  props: {\n    id: {\n      type: String,\n      default: function() {\n        return 'vue-tinymce-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\n      }\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    toolbar: {\n      type: Array,\n      required: false,\n      default() {\n        return []\n      }\n    },\n    menubar: {\n      type: String,\n      default: 'file edit insert view format table'\n    },\n    height: {\n      type: Number,\n      required: false,\n      default: 360\n    }\n  },\n  data() {\n    return {\n      hasChange: false,\n      hasInit: false,\n      tinymceId: this.id,\n      fullscreen: false,\n      languageTypeList: {\n        'en': 'en',\n        'zh': 'zh_CN'\n      }\n    }\n  },\n  computed: {\n    language() {\n      return this.languageTypeList[this.$store.getters.language]\n    }\n  },\n  watch: {\n    value(val) {\n      if (!this.hasChange && this.hasInit) {\n        this.$nextTick(() =>\n          window.tinymce.get(this.tinymceId).setContent(val || ''))\n      }\n    },\n    language() {\n      this.destroyTinymce()\n      this.$nextTick(() => this.initTinymce())\n    }\n  },\n  mounted() {\n    this.initTinymce()\n  },\n  activated() {\n    this.initTinymce()\n  },\n  deactivated() {\n    this.destroyTinymce()\n  },\n  destroyed() {\n    this.destroyTinymce()\n  },\n  methods: {\n    initTinymce() {\n      const _this = this\n      window.tinymce.init({\n        language: this.language,\n        selector: `#${this.tinymceId}`,\n        height: this.height,\n        body_class: 'panel-body ',\n        object_resizing: false,\n        toolbar: this.toolbar.length > 0 ? this.toolbar : toolbar,\n        menubar: this.menubar,\n        plugins: plugins,\n        end_container_on_empty_block: true,\n        powerpaste_word_import: 'clean',\n        code_dialog_height: 450,\n        code_dialog_width: 1000,\n        advlist_bullet_styles: 'square',\n        advlist_number_styles: 'default',\n        imagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\n        default_link_target: '_blank',\n        link_title: false,\n        nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\n        init_instance_callback: editor => {\n          if (_this.value) {\n            editor.setContent(_this.value)\n          }\n          _this.hasInit = true\n          editor.on('NodeChange Change KeyUp SetContent', () => {\n            this.hasChange = true\n            this.$emit('input', editor.getContent())\n          })\n        },\n        setup(editor) {\n          editor.on('FullscreenStateChanged', (e) => {\n            _this.fullscreen = e.state\n          })\n        }\n        // 整合七牛上传\n        // images_dataimg_filter(img) {\n        //   setTimeout(() => {\n        //     const $image = $(img);\n        //     $image.removeAttr('width');\n        //     $image.removeAttr('height');\n        //     if ($image[0].height && $image[0].width) {\n        //       $image.attr('data-wscntype', 'image');\n        //       $image.attr('data-wscnh', $image[0].height);\n        //       $image.attr('data-wscnw', $image[0].width);\n        //       $image.addClass('wscnph');\n        //     }\n        //   }, 0);\n        //   return img\n        // },\n        // images_upload_handler(blobInfo, success, failure, progress) {\n        //   progress(0);\n        //   const token = _this.$store.getters.token;\n        //   getToken(token).then(response => {\n        //     const url = response.data.qiniu_url;\n        //     const formData = new FormData();\n        //     formData.append('token', response.data.qiniu_token);\n        //     formData.append('key', response.data.qiniu_key);\n        //     formData.append('file', blobInfo.blob(), url);\n        //     upload(formData).then(() => {\n        //       success(url);\n        //       progress(100);\n        //     })\n        //   }).catch(err => {\n        //     failure('出现未知问题，刷新页面，或者联系程序员')\n        //     console.log(err);\n        //   });\n        // },\n      })\n    },\n    destroyTinymce() {\n      if (window.tinymce.get(this.tinymceId)) {\n        window.tinymce.get(this.tinymceId).destroy()\n      }\n    },\n    setContent(value) {\n      window.tinymce.get(this.tinymceId).setContent(value)\n    },\n    getContent() {\n      window.tinymce.get(this.tinymceId).getContent()\n    },\n    imageSuccessCBK(arr) {\n      const _this = this\n      arr.forEach(v => {\n        window.tinymce.get(_this.tinymceId).insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.tinymce-container {\n  position: relative;\n}\n.tinymce-container>>>.mce-fullscreen {\n  z-index: 10000;\n}\n.tinymce-textarea {\n  visibility: hidden;\n  z-index: -1;\n}\n.editor-custom-btn-container {\n  position: absolute;\n  right: 4px;\n  top: 4px;\n  /*z-index: 2005;*/\n}\n.fullscreen .editor-custom-btn-container {\n  z-index: 10000;\n  position: fixed;\n}\n.editor-upload-btn {\n  display: inline-block;\n}\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=26fa9258&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=26fa9258&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26fa9258\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"createPost-container\"},[_c('div',{staticClass:\"createPost-main-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-date-picker',{staticClass:\"filter-item\",attrs:{\"disabled\":\"\",\"type\":\"date\",\"format\":\"yyyy-MM-dd\",\"placeholder\":\"选择日期时间\"},model:{value:(_vm.postForm.createTime),callback:function ($$v) {_vm.$set(_vm.postForm, \"createTime\", $$v)},expression:\"postForm.createTime\"}}),_vm._v(\" \"),_c('el-select',{staticClass:\"filter-item\",attrs:{\"placeholder\":\"请选择版本号\"},model:{value:(_vm.postForm.tag),callback:function ($$v) {_vm.$set(_vm.postForm, \"tag\", $$v)},expression:\"postForm.tag\"}},_vm._l((_vm.tagList),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.tagName,\"value\":item.tagName}})})),_vm._v(\" \"),_c('el-select',{staticClass:\"filter-item\",attrs:{\"placeholder\":\"请选择需求类型\"},model:{value:(_vm.postForm.type),callback:function ($$v) {_vm.$set(_vm.postForm, \"type\", $$v)},expression:\"postForm.type\"}},[_c('el-option',{attrs:{\"label\":\"正式需求\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"需求变更\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"临时需求\",\"value\":\"2\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"editor-container\"},[_c('Tinymce',{ref:\"editor\",attrs:{\"height\":500},model:{value:(_vm.postForm.content),callback:function ($$v) {_vm.$set(_vm.postForm, \"content\", $$v)},expression:\"postForm.content\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"发布\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"createPost-container\">\n    <div class=\"createPost-main-container\">\n      <div class=\"filter-container\">\n        <el-date-picker\n          disabled\n          class=\"filter-item\"\n          v-model=\"postForm.createTime\"\n          type=\"date\"\n          format=\"yyyy-MM-dd\"\n          placeholder=\"选择日期时间\"\n        />\n        <!-- 版本号 -->\n        <el-select class=\"filter-item\" v-model=\"postForm.tag\" placeholder=\"请选择版本号\">\n          <el-option v-for=\"item in tagList\" :key=\"item._id\" :label=\"item.tagName\" :value=\"item.tagName\"></el-option>\n        </el-select>\n        <!-- 需求类型 0 新需求 1 变更需求 2 临时需求 -->\n        <el-select class=\"filter-item\" v-model=\"postForm.type\" placeholder=\"请选择需求类型\">\n          <el-option label=\"正式需求\" value=\"0\"></el-option>\n          <el-option label=\"需求变更\" value=\"1\"></el-option>\n          <el-option label=\"临时需求\" value=\"2\"></el-option>\n        </el-select>\n      </div>\n\n      <div class=\"editor-container\">\n        <Tinymce ref=\"editor\" :height=\"500\" v-model=\"postForm.content\"/>\n        <el-button @click=\"submitForm\" type=\"primary\">发布</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Tinymce from \"@/components/Tinymce\";\nimport { mapGetters } from \"vuex\";\nimport { Project } from \"@/api/project\";\n\nexport default {\n  name: \"createDemand\",\n  components: { Tinymce },\n  data() {\n    return {\n      postForm: {\n        createTime: new Date( // 当天23:59\n          new Date(new Date().toLocaleDateString()).getTime()\n        ).getTime(),\n        tag: \"\",\n        type: \"0\",\n        content: ``\n      },\n      tagList:[]\n    };\n  },\n  computed: {\n    ...mapGetters([\"name\", \"userId\"])\n  },\n  created() {\n    if (this.$route.query.change) {\n      let demand = JSON.parse(localStorage.getItem(\"demand\"));\n      this.postForm.tag = demand.tag;\n      this.postForm.content = demand.content;\n      this.postForm.type = \"1\";\n    }\n    this.getTag();\n  },\n  methods: {\n    getTag() {\n      Project.getTag({\n        limit: 1000,\n        page: 1\n      }).then(res => {\n        this.tagList = res.data;\n      });\n    },\n    submitForm() {\n      if (!this.postForm.createTime) {\n        this.$message.warning(\"请填写日期\");\n        return false;\n      }\n      if (!this.postForm.content.trim()) {\n        this.$message.warning(\"内容不能为空\");\n        return false;\n      }\n\n      this.$confirm(\"确定发布?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          Project.createDemand({\n            ...this.postForm,\n            author: this.name,\n            userId: this.userId\n          }).then(res => {\n            this.$message({\n              type: \"success\",\n              message: \"发布成功\"\n            });\n            this.$router.push(\"/project/demandList\");\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消\"\n          });\n        });\n    }\n  }\n};\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.createPost-container {\n  position: relative;\n  padding-top: 40px;\n  .createPost-main-container {\n    padding: 0px 45px 20px 50px;\n    .postInfo-container {\n      position: relative;\n      margin-bottom: 10px;\n      .postInfo-container-item {\n        float: left;\n      }\n    }\n    .editor-container {\n      min-height: 500px;\n      margin: 15px 0;\n      .editor-upload-btn-container {\n        text-align: right;\n        margin-right: 10px;\n        .editor-upload-btn {\n          display: inline-block;\n        }\n      }\n    }\n  }\n  .word-counter {\n    width: 40px;\n    position: absolute;\n    right: -10px;\n    top: 0px;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./createDemand.vue?vue&type=template&id=6fd96a11&scoped=true&\"\nimport script from \"./createDemand.vue?vue&type=script&lang=js&\"\nexport * from \"./createDemand.vue?vue&type=script&lang=js&\"\nimport style0 from \"./createDemand.vue?vue&type=style&index=0&id=6fd96a11&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fd96a11\",\n  null\n  \n)\n\ncomponent.options.__file = \"createDemand.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=26fa9258&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=26fa9258&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=style&index=0&id=6fd96a11&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--10-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createDemand.vue?vue&type=style&index=0&id=6fd96a11&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-2!../../../../node_modules/sass-loader/lib/loader.js??ref--10-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editorImage.vue?vue&type=style&index=0&id=39480e6e&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-2!../../../../node_modules/sass-loader/lib/loader.js??ref--10-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editorImage.vue?vue&type=style&index=0&id=39480e6e&rel=stylesheet%2Fscss&lang=scss&scoped=true&\""],"sourceRoot":""}