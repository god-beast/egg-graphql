(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-66e9"],{"1XQY":function(t,e,a){"use strict";var n=a("jZRq");a.n(n).a},"6bP5":function(t,e,a){"use strict";var n=a("Qq1u");a.n(n).a},"D+s9":function(t,e,a){"use strict";a.d(e,"a",function(){return r});var n=a("HB48").a.fetch,r={getDepartment:function(t){return n("get","/department",t)},editDepartment:function(t){return n("put","/department",t)},deleteDepartment:function(t){return n("delete","/department",t)},createDepartment:function(t){return n("post","/department",t)},getUser:function(t){return n("get","/user",t)},editUser:function(t){return n("put","/user",t)},deleteUser:function(t){return n("delete","/user",t)},createUser:function(t){return n("post","/user",t)},disabledUser:function(t){return n("post","/disabledUser",t)}}},NL2V:function(t,e,a){"use strict";a.r(e);var n=a("jr1U"),r=a.n(n),i=a("rfXi"),l=a.n(i),o=a("Kw5r");function s(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=[];return l()(t).forEach(function(t){void 0===t._expanded&&o.default.set(t,"_expanded",e);var i=1;if(void 0!==n&&null!==n&&(i=n+1),o.default.set(t,"_level",i),a&&o.default.set(t,"parent",a),r.push(t),t.children&&t.children.length>0){var l=s(t.children,e,t,i);r=r.concat(l)}}),r}var d={name:"TreeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){var t=void 0;t=Array.isArray(this.data)?this.data:[this.data];var e=this.evalFunc||s,a=this.evalArgs?r()([t,this.expandAll],this.evalArgs):[t,this.expandAll];return e.apply(null,a)}},methods:{showRow:function(t){var e=!t.row.parent||t.row.parent._expanded&&t.row.parent._show;return t.row._show=e,e?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(t){var e=this.formatData[t];e._expanded=!e._expanded},iconShow:function(t,e){return 0===t&&e.children&&e.children.length>0}}},c=(a("6bP5"),a("1XQY"),a("KHd+")),u=Object(c.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",t._b({attrs:{data:t.formatData,"row-style":t.showRow}},"el-table",t.$attrs,!1),[0===t.columns.length?a("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row._level,function(t){return a("span",{key:t,staticClass:"ms-tree-space"})}),t._v(" "),t.iconShow(0,e.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){t.toggleExpanded(e.$index)}}},[e.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):t._e(),t._v("\n      "+t._s(e.$index)+"\n    ")]}}])}):t._l(t.columns,function(e,n){return a("el-table-column",{key:e.value,attrs:{label:e.text,width:e.width},scopedSlots:t._u([{key:"default",fn:function(r){return[t._l(r.row._level,function(e){return 0===n?a("span",{key:e,staticClass:"ms-tree-space"}):t._e()}),t._v(" "),t.iconShow(n,r.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(e){t.toggleExpanded(r.$index)}}},[r.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):t._e(),t._v("\n      "+t._s(r.row[e.value])+"\n    ")]}}])})}),t._v(" "),t._t("default")],2)},[],!1,null,"60a8d106",null);u.options.__file="index.vue";var p=u.exports;function m(t,e,a,n,r){var i=[],s=[];return l()(t).forEach(function(t){void 0===t._expanded&&o.default.set(t,"_expanded",e);var l=1;if(void 0!==n&&null!==n&&(l=n+1),o.default.set(t,"_level",l),a?(o.default.set(t,"parent",a),i[l]||(i[l]=0),o.default.set(t,"_marginLeft",i[l]+a._marginLeft),o.default.set(t,"_width",t[r]/a[r]*a._width),i[l]+=t._width):(i[t.id]=[],i[t.id][l]=0,o.default.set(t,"_marginLeft",0),o.default.set(t,"_width",1)),s.push(t),t.children&&t.children.length>0){var d=m(t.children,e,t,l,r);s=s.concat(d)}}),s}var f=a("D+s9"),h={components:{treeTable:p},data:function(){return{addShow:!1,func:m,expandAll:!1,rules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"change"}],introduction:[{required:!0,message:"请输入部门简介",trigger:"change"}]},editData:{parentId:"",departmentId:"",parentName:"",departmentName:"",introduction:""},data:{},args:[null,null,"timeLine"]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;f.a.getDepartment().then(function(e){t.data=e.data})},addData:function(t){this.editData={parentId:t.departmentId,departmentId:"",parentName:t.departmentName,departmentName:"",introduction:""},this.addShow=!0},submitData:function(){var t=this;this.editData.parentId?f.a.createDepartment(this.editData).then(function(e){t.$message.success("添加成功"),t.getData(),t.addShow=!1}):f.a.editDepartment(this.editData).then(function(e){t.$message.success("编辑成功"),t.getData(),t.addShow=!1})},cancelUpload:function(){this.editData={parentId:"",departmentId:"",parentName:"",departmentName:"",introduction:""},this.addShow=!1},putData:function(t){this.editData={parentId:"",departmentId:t.departmentId,parentName:"",departmentName:t.departmentName,introduction:t.introduction},this.addShow=!0},deleteData:function(t){var e=this;this.$confirm("确定删除该部门及下属部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){f.a.deleteDepartment({departmentId:t}).then(function(t){e.$message({type:"success",message:"成功删除"}),e.getData()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},v=Object(c.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-dialog",{attrs:{title:"部门编辑",visible:t.addShow,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addShow=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.editData,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.editData.parentName,expression:"editData.parentName"}],attrs:{label:"上级部门"}},[a("el-input",{staticClass:"dialog_pram",attrs:{clearable:"",readonly:""},model:{value:t.editData.parentName,callback:function(e){t.$set(t.editData,"parentName",e)},expression:"editData.parentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门名称",prop:"departmentName"}},[a("el-input",{staticClass:"dialog_pram",attrs:{clearable:"",placeholder:"请输入部门名称"},model:{value:t.editData.departmentName,callback:function(e){t.$set(t.editData,"departmentName",e)},expression:"editData.departmentName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门简介",prop:"introduction"}},[a("el-input",{staticClass:"dialog_pram",attrs:{clearable:"",placeholder:"请输入部门简介"},model:{value:t.editData.introduction,callback:function(e){t.$set(t.editData,"introduction",e)},expression:"editData.introduction"}})],1)],1),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitData}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{type:""},on:{click:t.cancelUpload}},[t._v("取消")])],1)],1),t._v(" "),a("tree-table",{attrs:{data:t.data,"eval-func":t.func,"eval-args":t.args,"expand-all":t.expandAll,border:""}},[a("el-table-column",{attrs:{label:"部门名称",align:"center",prop:"departmentName"}}),t._v(" "),a("el-table-column",{attrs:{label:"部门人员",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){}}])}),t._v(" "),a("el-table-column",{attrs:{label:"简介",align:"center",prop:"introduction"}}),t._v(">\n    "),a("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.addData(e.row)}}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.putData(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",disabled:-1==e.row.departmentId,type:"warning"},on:{click:function(a){t.deleteData(e.row.departmentId)}}},[t._v("删除")])]}}])})],1)],1)},[],!1,null,null,null);v.options.__file="department.vue";e.default=v.exports},Qq1u:function(t,e,a){},jZRq:function(t,e,a){},jr1U:function(t,e,a){t.exports={default:a("wObO"),__esModule:!0}},wObO:function(t,e){t.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}}}]);