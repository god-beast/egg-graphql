{"version":3,"sources":["webpack:///./src/views/question/createQuestion.vue?991f","webpack:///src/views/question/createQuestion.vue","webpack:///./src/views/question/createQuestion.vue?731e","webpack:///./src/views/question/createQuestion.vue","webpack:///./src/api/question.js","webpack:///./src/views/question/createQuestion.vue?5ac6"],"names":["swapItems","arr","index1","index2","splice","quesTypeMap","单选","多选","简答","时间","question_createQuestionvue_type_script_lang_js_","data","quesText","1","2","3","4","popSelect","typeOptions","quesTypeShow","formItem","id","title","status","questionList","isAdd","addQuestionIndex","watch","this","addQues","methods","upQues","index","downQues","length","deleteQues","_this","$message","warning","$Modal","confirm","content","onOk","deleteOption","optionIndex","optionList","addQuesBtn","typeNum","ques","type","question","questionOption","push","addOption","saveAsNew","_this2","$confirm","confirmButtonText","cancelButtonText","then","save","catch","message","_this3","_id","info_ok","forEach","val","sort","i","opVal","questionId","opIndex","put","res","success","$router","err","console","log","create","getDetailInfo","_this4","get","mounted","ques_id","$route","query","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","model","label-width","label","placeholder","value","callback","$$v","$set","trim","expression","_v","_l","item","key","staticStyle","width","slot","_s","float","size","on","click","$event","margin-bottom","disabled","option","_e","margin-right","margin-left","icon","circle","display","align-items","margin-top","visible","update:visible","margin","options","__file","__webpack_exports__","__webpack_require__","d","Question","fetch","fetchobj","delete","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_2_node_modules_less_loader_dist_cjs_js_ref_8_3_node_modules_vue_loader_lib_index_js_vue_loader_options_createQuestion_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","n"],"mappings":"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","file":"static/js/chunk-725a.df17e2ee.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"createQueTemp\"},[_c('el-form',{staticClass:\"createQueTemp_form\",attrs:{\"model\":_vm.formItem,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"问卷名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入问卷名称\"},model:{value:(_vm.formItem.title),callback:function ($$v) {_vm.$set(_vm.formItem, \"title\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formItem.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"问卷状态\"}},[_c('el-radio-group',{model:{value:(_vm.formItem.status),callback:function ($$v) {_vm.$set(_vm.formItem, \"status\", $$v)},expression:\"formItem.status\"}},[_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"正常\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"禁用\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"createQueTemp_ques_wrap\"},[_vm._l((_vm.formItem.questionList),function(item,index){return _c('div',{key:index,staticClass:\"createQueTemp_per_ques\"},[_c('el-card',{staticClass:\"box-card\",staticStyle:{\"width\":\"100%\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-tag',{attrs:{\"type\":\"info\"}},[_vm._v(\"问题\"+_vm._s(index+1))]),_vm._v(\" \"),_c('el-tag',{attrs:{\"type\":\"\"}},[_vm._v(\"(\"+_vm._s(_vm.quesText[item.type])+\")\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.addQuesBtn(index)}}},[_vm._v(\"插入问题\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.upQues(index)}}},[_vm._v(\"上移\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.downQues(index)}}},[_vm._v(\"下移\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.deleteQues(index)}}},[_vm._v(\"删除\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"createQueTemp_per_ques_right\"},[_c('el-input',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"placeholder\":\"请输入问题名称\"},model:{value:(item.question),callback:function ($$v) {_vm.$set(item, \"question\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.question\"}}),_vm._v(\" \"),(item.type===4)?_c('div',[_c('el-datePicker',{staticStyle:{\"width\":\"200px\"},attrs:{\"type\":\"date\",\"placeholder\":\"用户选择时间\",\"disabled\":\"\"}})],1):_vm._l((item.optionList),function(option,optionIndex){return _c('div',{key:optionIndex,staticClass:\"createQueTemp_optionList\"},[(item.type === 1)?_c('el-radio',{staticClass:\"type-append\",attrs:{\"disabled\":\"\",\"value\":false}}):_vm._e(),_vm._v(\" \"),(item.type === 2)?_c('el-checkbox',{staticClass:\"type-append\",staticStyle:{\"margin-right\":\"10px\"},attrs:{\"disabled\":\"\"}}):_vm._e(),_vm._v(\" \"),(item.type === 3)?_c('el-input',{attrs:{\"placeholder\":\"用户输入框\",\"disabled\":\"\"}}):[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(option.questionOption),callback:function ($$v) {_vm.$set(option, \"questionOption\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"option.questionOption\"}}),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){_vm.deleteOption(index,optionIndex)}}})]],2)}),_vm._v(\" \"),(item.type===1||item.type===2)?_c('el-button',{on:{\"click\":function($event){_vm.addOption(index)}}},[_vm._v(\"添加选项\")]):_vm._e()],2)])],1)}),_vm._v(\" \"),_c('el-button',{staticClass:\"createQueTemp_ques_wrap_add_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addQuesBtn(-1)}}},[_vm._v(\"添加问题\")])],2),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"width\":\"300px\",\"margin-top\":\"40px\"}},[_c('el-button',{staticClass:\"createQueTemp_save_btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),(!_vm.isAdd)?_c('el-button',{staticClass:\"createQueTemp_save_btn\",attrs:{\"type\":\"warning\"},on:{\"click\":_vm.saveAsNew}},[_vm._v(\"另存模板\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.quesTypeShow,\"width\":\"400px\",\"title\":\"选择问题类型\"},on:{\"update:visible\":function($event){_vm.quesTypeShow=$event}}},[_c('el-radio-group',{staticStyle:{\"margin\":\"0 auto\",\"display\":\"block\",\"width\":\"230px\"},model:{value:(_vm.popSelect),callback:function ($$v) {_vm.popSelect=$$v},expression:\"popSelect\"}},[_c('el-radio-button',{attrs:{\"label\":\"单选\"}}),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"多选\"}}),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"简答\"}}),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"时间\"}})],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--20180530 by yugou-->\r\n<style lang=\"less\">\r\n@bgColor: #f0f0f0;\r\n.createQueTemp {\r\n  height: 100%;\r\n  padding: 5px;\r\n  box-sizing: border-box;\r\n  &_form {\r\n    background-color: white;\r\n    padding: 30px;\r\n    border-radius: 5px;\r\n    .el-form-item {\r\n      padding-right: 15px;\r\n      .el-input {\r\n        width: 500px;\r\n      }\r\n    }\r\n  }\r\n  &_ques_wrap {\r\n    padding: 10px 15px;\r\n    max-width: 1000px;\r\n    border: 1px solid @bgColor;\r\n    border-left: 0;\r\n    border-right: 0;\r\n    &_add_btn {\r\n      margin-top: 5px;\r\n    }\r\n  }\r\n  &_optionList {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 20px;\r\n  }\r\n  &_per_ques {\r\n    display: flex;\r\n    margin-bottom: 5px;\r\n    &_left {\r\n      width: 90px;\r\n      background-color: @bgColor;\r\n      margin-right: 3px;\r\n      padding: 15px 0;\r\n      text-align: center;\r\n      .ivu-btn {\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n    &_right {\r\n      flex: 1;\r\n      background-color: @bgColor;\r\n      padding: 15px;\r\n      .ivu-input {\r\n        margin-bottom: 10px;\r\n        width: 80%;\r\n      }\r\n      div {\r\n        position: relative;\r\n        .ivu-btn {\r\n          position: absolute;\r\n          left: 80%;\r\n          top: 0;\r\n        }\r\n        // .type-append {\r\n        //   position: absolute;\r\n        //   left: 0;\r\n        //   top: 7px;\r\n        //   padding-right: 30px;\r\n        // }\r\n        .useful-input {\r\n          padding-left: 30px;\r\n        }\r\n        .ivu-select {\r\n          width: 100px;\r\n          padding: 0 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  &_save_btn {\r\n    display: block;\r\n    margin: 15px auto 0;\r\n  }\r\n}\r\n.ivu-modal-footer {\r\n  display: block;\r\n}\r\n</style>\r\n<template>\r\n  <div class=\"createQueTemp\">\r\n    <el-form :model=\"formItem\" label-width=\"80px\" class=\"createQueTemp_form\">\r\n      <el-form-item label=\"问卷名称\">\r\n        <el-input v-model.trim=\"formItem.title\" placeholder=\"请输入问卷名称\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"问卷状态\">\r\n        <el-radio-group v-model=\"formItem.status\">\r\n          <el-radio label=\"1\">正常</el-radio>\r\n          <el-radio label=\"0\">禁用</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <div class=\"createQueTemp_ques_wrap\">\r\n        <div\r\n          v-for=\"(item,index) in formItem.questionList\"\r\n          :key=\"index\"\r\n          class=\"createQueTemp_per_ques\"\r\n        >\r\n          <el-card class=\"box-card\" style=\"width:100%\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n              <el-tag type=\"info\">问题{{index+1}}</el-tag>\r\n              <el-tag type>({{quesText[item.type]}})</el-tag>\r\n              <div style=\"float:right\">\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"addQuesBtn(index)\">插入问题</el-button>\r\n                <el-button type=\"warning\" size=\"mini\" @click=\"upQues(index)\">上移</el-button>\r\n                <el-button type=\"warning\" size=\"mini\" @click=\"downQues(index)\">下移</el-button>\r\n                <el-button type=\"danger\" size=\"mini\" @click=\"deleteQues(index)\">删除</el-button>\r\n              </div>\r\n            </div>\r\n            <div class=\"createQueTemp_per_ques_right\">\r\n              <el-input\r\n                v-model.trim=\"item.question\"\r\n                placeholder=\"请输入问题名称\"\r\n                style=\"margin-bottom:20px;\"\r\n              ></el-input>\r\n              <div v-if=\"item.type===4\">\r\n                <el-datePicker type=\"date\" placeholder=\"用户选择时间\" style=\"width: 200px\" disabled></el-datePicker>\r\n              </div>\r\n              <div\r\n                class=\"createQueTemp_optionList\"\r\n                v-else\r\n                v-for=\"(option,optionIndex) in item.optionList\"\r\n                :key=\"optionIndex\"\r\n              >\r\n                <el-radio v-if=\"item.type === 1\" disabled class=\"type-append\" :value=\"false\"></el-radio>\r\n                <el-checkbox\r\n                  style=\"margin-right:10px\"\r\n                  disabled\r\n                  v-if=\"item.type === 2\"\r\n                  class=\"type-append\"\r\n                ></el-checkbox>\r\n                <el-input placeholder=\"用户输入框\" disabled v-if=\"item.type === 3\"></el-input>\r\n                <template v-else>\r\n                  <el-input v-model.trim=\"option.questionOption\" placeholder=\"请输入\"></el-input>\r\n                  <el-button\r\n                    style=\"margin-left:10px\"\r\n                    @click=\"deleteOption(index,optionIndex)\"\r\n                    type=\"danger\"\r\n                    icon=\"el-icon-delete\"\r\n                    circle\r\n                  ></el-button>\r\n                </template>\r\n              </div>\r\n              <el-button @click=\"addOption(index)\" v-if=\"item.type===1||item.type===2\">添加选项</el-button>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n        <el-button\r\n          @click=\"addQuesBtn(-1)\"\r\n          type=\"primary\"\r\n          class=\"createQueTemp_ques_wrap_add_btn\"\r\n        >添加问题</el-button>\r\n      </div>\r\n      <div style=\"display: flex;align-items: center;width: 300px;margin-top:40px;\">\r\n        <el-button type=\"primary\" @click=\"save\" class=\"createQueTemp_save_btn\">保存</el-button>\r\n        <el-button\r\n          type=\"warning\"\r\n          @click=\"saveAsNew\"\r\n          class=\"createQueTemp_save_btn\"\r\n          v-if=\"!isAdd\"\r\n        >另存模板</el-button>\r\n      </div>\r\n    </el-form>\r\n\r\n    <el-dialog :visible.sync=\"quesTypeShow\" width=\"400px\" title=\"选择问题类型\">\r\n      <el-radio-group style=\"margin:0 auto;display:block;width:230px\" v-model=\"popSelect\">\r\n        <el-radio-button label=\"单选\"></el-radio-button>\r\n        <el-radio-button label=\"多选\"></el-radio-button>\r\n        <el-radio-button label=\"简答\"></el-radio-button>\r\n        <el-radio-button label=\"时间\"></el-radio-button>\r\n      </el-radio-group>\r\n      <div slot=\"footer\"></div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Question } from \"@/api/question\";\r\n/**\r\n * 交换数组中的两个元素--用于上移，下移\r\n * @param arr\r\n * @param index1\r\n * @param index2\r\n * @returns arr\r\n */\r\nlet swapItems = function(arr, index1, index2) {\r\n  arr[index1] = arr.splice(index2, 1, arr[index1])[0];\r\n  return arr;\r\n};\r\nconst quesTypeMap = { 单选: 1, 多选: 2, 简答: 3, 时间: 4 };\r\nexport default {\r\n  data() {\r\n    return {\r\n      quesText: { 1: \"单选\", 2: \"多选\", 3: \"简答\", 4: \"时间\" },\r\n      popSelect: \"\", // 问题类型\r\n      typeOptions: [],\r\n      quesTypeShow: false,\r\n      formItem: {\r\n        id: \"\", //新增时id为空，修改时是后台传的\r\n        title: \"\", //问卷名称\r\n        status: \"1\", //问卷状态\r\n        questionList: []\r\n      },\r\n      isAdd: false,\r\n      addQuestionIndex: -1 // 插入问题 按钮的index\r\n    };\r\n  },\r\n  watch: {\r\n    popSelect() {\r\n      if (this.popSelect) {\r\n        this.addQues(quesTypeMap[this.popSelect]);\r\n        this.quesTypeShow = false;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 上移问题\r\n     */\r\n    upQues(index) {\r\n      if (index === 0) {\r\n        return false;\r\n      }\r\n      this.formItem.questionList = swapItems(\r\n        this.formItem.questionList,\r\n        index,\r\n        index - 1\r\n      );\r\n    },\r\n    /**\r\n     * 下移问题\r\n     */\r\n    downQues(index) {\r\n      if (index === this.formItem.questionList.length - 1) {\r\n        return false;\r\n      }\r\n      this.formItem.questionList = swapItems(\r\n        this.formItem.questionList,\r\n        index,\r\n        index + 1\r\n      );\r\n    },\r\n    /**\r\n     * 删除问题\r\n     */\r\n    deleteQues(index) {\r\n      if (this.formItem.questionList.length === 1) {\r\n        this.$message.warning(\"问卷至少需有一个问题！\");\r\n        return false;\r\n      }\r\n      this.$Modal.confirm({\r\n        title: \"删除该问题\",\r\n        content: \"确定删除该问题？\",\r\n        onOk: () => {\r\n          this.formItem.questionList.splice(index, 1);\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 删除问题的某个选项\r\n     */\r\n    deleteOption(index, optionIndex) {\r\n      if (this.formItem.questionList[index].optionList.length === 1) {\r\n        this.$message.warning(\"该类问题至少需有一个选项！\");\r\n        return false;\r\n      }\r\n      this.formItem.questionList[index].optionList.splice(optionIndex, 1);\r\n    },\r\n    addQuesBtn(index) {\r\n      this.quesTypeShow = true;\r\n      this.popSelect = \"\";\r\n      this.addQuestionIndex = index;\r\n    },\r\n    /**\r\n     * 添加问题\r\n     */\r\n    addQues(typeNum) {\r\n      let ques = {\r\n        type: typeNum, // 问卷类型：1单选，2多选,3简答,4多填空,5地址,6时间\r\n        question: \"\",\r\n        optionList: [{ questionOption: \"\" }, { questionOption: \"\" }]\r\n      };\r\n      if (typeNum === 3) {\r\n        ques.optionList = [{ questionOption: \"\" }];\r\n      }\r\n      if (this.addQuestionIndex === -1) {\r\n        this.formItem.questionList.push(ques);\r\n      } else {\r\n        this.formItem.questionList.splice(this.addQuestionIndex + 1, 0, ques);\r\n      }\r\n    },\r\n    /**\r\n     * 添加某个问题的选项\r\n     */\r\n    addOption(index) {\r\n      this.formItem.questionList[index].optionList.push({ questionOption: \"\" });\r\n    },\r\n    // 快速新增一个已有的类似的问题模板\r\n    saveAsNew() {\r\n      this.$confirm(\"确定另存为新问卷?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n         this.save('new');\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消\"\r\n          });\r\n        });\r\n    },\r\n    /**\r\n     * 保存上传\r\n     */\r\n    save(type) {\r\n      // 快速新增一个已有的类似的问题模板\r\n      if (type === \"new\") {\r\n        delete this.formItem._id;\r\n      }\r\n      let info_ok = true; //输入是否符合要求\r\n      if (!this.formItem.title) {\r\n        this.$message.warning(\"问卷名称不能为空！\");\r\n        return false;\r\n      }\r\n      //   let typeArr = this.formItem.typeId.split(\"@_@\");\r\n      if (this.formItem.questionList.length < 1) {\r\n        this.$message.warning(\"问卷至少需有一个问题！\");\r\n        return false;\r\n      }\r\n      this.formItem.questionList.forEach((val, index) => {\r\n        val.sort = index;\r\n        if (!val.question) {\r\n          this.$message.warning(\"问题\" + (index + 1) + \"的名称不能为空！\");\r\n          info_ok = false;\r\n          return false;\r\n        }\r\n        // 另存功能\r\n        if (type === \"new\") {\r\n          val.id = \"\";\r\n        }\r\n        if (val.type === 1 || val.type === 2) {\r\n          for (let i = 0; i < val.optionList.length; i++) {\r\n            let opVal = val.optionList[i];\r\n            opVal.sort = i;\r\n            // 另存功能\r\n            if (type === \"new\") {\r\n              opVal.id = \"\";\r\n              opVal.questionId = \"\";\r\n            }\r\n            let opIndex = i;\r\n            if (!opVal.questionOption) {\r\n              if (val.type === 4) {\r\n                this.$message.warning(\r\n                  \"问题\" +\r\n                    (index + 1) +\r\n                    \"的子问题\" +\r\n                    (opIndex + 1) +\r\n                    \"的名称不能为空！\"\r\n                );\r\n              } else {\r\n                this.$message.warning(\r\n                  \"问题\" +\r\n                    (index + 1) +\r\n                    \"的选项\" +\r\n                    (opIndex + 1) +\r\n                    \"的名称不能为空！\"\r\n                );\r\n              }\r\n              info_ok = false;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      });\r\n      if (info_ok) {\r\n        if (this.formItem._id) {\r\n          Question.put(this.formItem)\r\n            .then(res => {\r\n              this.$message.success(\"编辑成功\");\r\n              this.$router.push('/question/questionList');\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n        } else {\r\n          Question.create(this.formItem)\r\n            .then(res => {\r\n              this.$message.success(\"新增成功\");\r\n              this.$router.push('/question/questionList');\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 获取问卷详情\r\n     */\r\n    getDetailInfo(id) {\r\n      Question.get({ _id: id })\r\n        .then(res => {\r\n          this.formItem = res.data[0];\r\n        })\r\n        .catch(err => {});\r\n    }\r\n  },\r\n  mounted() {\r\n    let ques_id = this.$route.query.id;\r\n    if (ques_id !== \"0\" && ques_id) {\r\n      //id为0时是新增\r\n      this.getDetailInfo(ques_id);\r\n      this.isAdd = false;\r\n    } else {\r\n      this.isAdd = true;\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createQuestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createQuestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./createQuestion.vue?vue&type=template&id=2a531cfa&\"\nimport script from \"./createQuestion.vue?vue&type=script&lang=js&\"\nexport * from \"./createQuestion.vue?vue&type=script&lang=js&\"\nimport style0 from \"./createQuestion.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"createQuestion.vue\"\nexport default component.exports","import fetchobj from '@/utils/fetch'\nlet fetch = fetchobj.fetch;\n\nexport const Question = {\n   \n  create(data) {\n    return fetch('post', '/question', data)\n  },\n\n  get(data) {\n    return fetch('get', '/question', data)\n  },\n\n  delete(data){\n    return fetch('delete', '/question', data)\n  },\n\n  put(data) {\n    return fetch('put', '/question', data)\n  },\n\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../../node_modules/less-loader/dist/cjs.js??ref--8-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createQuestion.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../../node_modules/less-loader/dist/cjs.js??ref--8-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./createQuestion.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}